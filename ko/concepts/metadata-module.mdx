---
title: 👀 메타데이터 모듈
sidebarTitle: 개요
description: IP 자산의 메타데이터를 관리하고 확인합니다.
---

메타데이터 모듈은 Story 내의 IP 자산에 대한 메타데이터의 생성, 관리 및 검색을 가능하게 합니다. 이는 쓰기 작업을 위한 CoreMetadataModule과 읽기 작업을 위한 CoreMetadataViewModule의 두 가지 주요 구성 요소로 이루어져 있습니다.

<CardGroup cols={2}>
  <Card title="CoreMetadataModule.sol" href="https://github.com/storyprotocol/protocol-core-v1/blob/main/contracts/modules/metadata/CoreMetadataModule.sol" icon="scroll" color="#ccb092">
    Core Metadata Module의 스마트 컨트랙트를 확인하세요.
  </Card>

  <Card title="CoreMetadataViewModule.sol" href="https://github.com/storyprotocol/protocol-core-v1/blob/main/contracts/modules/metadata/CoreMetadataViewModule.sol" icon="eye" color="#92ccb0">
    Core Metadata View Module의 스마트 컨트랙트를 확인하세요.
  </Card>
</CardGroup>

## 메타데이터 구조

IP 자산의 메타데이터는 다음을 포함합니다:

* **metadataURI**: IP 자산의 상세 메타데이터를 가리키는 URI
* **metadataHash**: 검증을 위한 메타데이터의 해시
* **nftTokenURI**: IP 자산과 연관된 NFT의 메타데이터를 가리키는 URI
* **nftMetadataHash**: 검증을 위한 NFT 메타데이터의 해시
* **registrationDate**: IP 자산이 등록된 시점
* **owner**: IP 자산의 현재 소유자

## CoreMetadataModule (쓰기 작업)

`CoreMetadataModule.sol`는 IP 자산의 메타데이터 쓰기 및 업데이트를 담당합니다. 이는 **stateful**이며 다음과 같은 주요 기능을 제공합니다:

* IP 자산의 메타데이터 URI 설정 및 업데이트
* NFT 토큰 URI 설정 및 업데이트
* 메타데이터를 불변으로 만들기 위한 동결
* 검증을 위한 메타데이터 해시 관리

이 모듈은 메타데이터를 IP 자산의 저장소에 저장하여 다른 모듈과 애플리케이션에서 접근할 수 있게 합니다.

### 메타데이터 설정

IP 자산의 메타데이터를 설정하려면 호출자가 적절한 권한을 가지고 있어야 합니다. CoreMetadataModule은 메타데이터 설정을 위한 여러 함수를 제공합니다:

* `setMetadataURI`: IP metadataURI와 해당 해시만 설정
* `updateNftTokenURI`: NFT 토큰 URI와 해당 해시 업데이트
* `setAll`: 모든 메타데이터 속성을 한 번에 설정

다음은 예시입니다:

```solidity solidity
// Set the metadata URI and hash
coreMetadataModule.setMetadataURI(
    ipAssetAddress,
    "https://example.com/metadata/asset123",
    keccak256("metadata content hash")
);
```

### 메타데이터 동결

CoreMetadataModule은 IP 자산 소유자가 메타데이터를 동결하여 불변으로 만들 수 있게 합니다. 한번 동결되면 메타데이터는 변경할 수 없어 IP 자산의 정보가 영구적으로 유지됩니다.

메타데이터를 동결하려면:

```solidity solidity
// Make the metadata immutable
coreMetadataModule.freezeMetadata(ipAssetAddress);
```

메타데이터가 동결되었는지 다음과 같이 확인할 수 있습니다:

```solidity solidity
// Check if metadata is frozen
bool isFrozen = coreMetadataModule.isMetadataFrozen(ipAssetAddress);
```

## CoreMetadataViewModule (읽기 작업)

`CoreMetadataViewModule.sol`는 CoreMetadataModule에 저장된 메타데이터에 접근할 수 있는 읽기 전용 모듈입니다. View Module 패턴을 따르며 다음과 같은 주요 기능을 제공합니다:

* 메타데이터 URI 및 해시 검색
* NFT 토큰 URI 및 메타데이터 해시 검색
* 모든 메타데이터 속성이 포함된 형식화된 JSON 문자열 생성
* 등록 날짜 및 소유권 정보 확인

### 메타데이터 검색

CoreMetadataViewModule은 메타데이터를 검색하기 위한 다양한 함수를 제공합니다:

* `getCoreMetadata`: 단일 구조체로 모든 메타데이터 반환
* `getMetadataURI`: 메타데이터 URI만 반환
* `getNftTokenURI`: NFT 토큰 URI 반환
* `getJsonString`: 모든 메타데이터가 포함된 형식화된 JSON 문자열 반환

다음은 예시입니다:

```solidity solidity
// Get the metadata URI
string memory uri = coreMetadataViewModule.getMetadataURI(ipAssetAddress);

// Get all metadata in one call
CoreMetadata memory metadata = coreMetadataViewModule.getCoreMetadata(ipAssetAddress);

// Get a JSON representation of all metadata
string memory jsonMetadata = coreMetadataViewModule.getJsonString(ipAssetAddress);
```

메타데이터 모듈은 IP 자산 메타데이터를 관리하기 위한 강력한 시스템을 제공하여 지적 재산에 대한 중요한 정보가 적절히 기록되고, 접근 가능하며, 필요할 때 불변성을 가질 수 있도록 보장합니다.
