---
title: ğŸª Hooks
sidebarTitle: Hooks
icon: fishing-rod
description: ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê±°ë‚˜ íŒŒìƒë¬¼ì„ ë“±ë¡í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
---

Hooksë¥¼ í†µí•´ ê°œë°œìëŠ” ë°œí–‰ ì‹œ ì‚¬ìš©ì ì •ì˜ êµ¬í˜„, ì œí•œ ì‚¬í•­ ë° ê¸°ëŠ¥ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤[License Tokens](/concepts/licensing-module/license-token) ë˜ëŠ” íŒŒìƒë¬¼ì„ ë“±ë¡í•  ë•Œ.

ë‘ ê°€ì§€ ìœ í˜•ì˜ hooksê°€ ìˆìŠµë‹ˆë‹¤:

1. **Licensing Hooks**: ë‹¤ìŒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ [ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ ì¶”ê°€](/concepts/licensing-module/license-config#logic-that-is-possible-with-license-config) (ê·¸ë¦¬ê³  íŒŒìƒë¬¼ ë“±ë¡). ì˜ˆë¥¼ ë“¤ì–´, ë™ì  ê°€ê²© ìš”ì²­, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ í† í°ì˜ ìˆ˜ëŸ‰ ì œí•œ, í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë“±ì…ë‹ˆë‹¤. Licensing HooksëŠ” ì–¸ì œë“ ì§€ ë¼ì´ì„ ì‹± êµ¬ì„±ì— ì¶”ê°€/ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **Commercializer Checker Hooks**: Licensing Hooksì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì˜ ì§ì ‘ì ì¸ ë¶€ë¶„ì´ë©° ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©ì ì •ì˜ ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ë°˜í™˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## Licensing Hooks

ì´ëŠ” ë‹¤ìŒ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê³„ì•½ì…ë‹ˆë‹¤ `ILicensingHook` ì´ëŠ” ë‹¤ìŒìœ¼ë¡œë¶€í„° í™•ì¥ë©ë‹ˆë‹¤ `IModule`.

ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€, Licensing Hookì´ ë‹¤ìŒì„ êµ¬í˜„í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤ `beforeMintLicenseTokens` í•¨ìˆ˜ë¡œ, ì´ëŠ” License Tokenì´ ë°œí–‰ë˜ê¸° ì „ì— í˜¸ì¶œë˜ì–´ êµ¬í˜„í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤ [ì‚¬ìš©ì ì •ì˜ ë¡œì§](/concepts/licensing-module/license-config#logic-that-is-possible-with-license-config) ê·¸ë¦¬ê³  ìµœì¢… ê²°ì • `totalMintingFee` í•´ë‹¹ License Tokenì˜.

<Note>
  ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš” `ILicensingHook` ìŠ¤ë§ˆíŠ¸ ê³„ì•½
  [ì—¬ê¸°](https://github.com/storyprotocol/protocol-core-v1/blob/main/contracts/interfaces/modules/licensing/ILicensingHook.sol#L26).
</Note>

```solidity ILicensingHook.sol
/// @notice This function is called when the LicensingModule mints license tokens.
/// @dev The hook can be used to implement various checks and determine the minting price.
/// The hook should revert if the minting is not allowed.
/// @param caller The address of the caller who calling the mintLicenseTokens() function.
/// @param licensorIpId The ID of licensor IP from which issue the license tokens.
/// @param licenseTemplate The address of the license template.
/// @param licenseTermsId The ID of the license terms within the license template,
/// which is used to mint license tokens.
/// @param amount The amount of license tokens to mint.
/// @param receiver The address of the receiver who receive the license tokens.
/// @param hookData The data to be used by the licensing hook.
/// @return totalMintingFee The total minting fee to be paid when minting amount of license tokens.
function beforeMintLicenseTokens(
  address caller,
  address licensorIpId,
  address licenseTemplate,
  uint256 licenseTermsId,
  uint256 amount,
  address receiver,
  bytes calldata hookData
) external returns (uint256 totalMintingFee);
```

ì´ê²ƒì´ ë°˜í™˜í•˜ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš” `totalMintingFee`. "ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , `LicenseConfig`ì—ì„œë„ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, `beforeMintLicenseTokens`ì—ì„œ ë™ì  ê°€ê²©ì„ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ ìµœì¢… ë°œí–‰ ìˆ˜ìˆ˜ë£ŒëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?" ë‹¤ìŒì´ ìš°ì„ ìˆœìœ„ì…ë‹ˆë‹¤:

| ë°œí–‰ ìˆ˜ìˆ˜ë£Œ                                               | ì¤‘ìš”ë„    |
| ---------------------------------------------------- | ------ |
| ë‹¤ìŒì—ì„œ `totalMintingFee` ë°˜í™˜ëœ `beforeMintLicenseTokens` | ìµœìš°ì„  ìˆœìœ„ |
| ë‹¤ìŒì—ì„œ `mintingFee` ì„¤ì •ëœ `LicenseConfig`                | â¬‡ï¸     |
| ë‹¤ìŒì—ì„œ `mintingFee` ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ ì„¤ì •ëœ                      | ìµœí•˜ìœ„ ìˆœìœ„ |

<Warning>
  ì™¸ë¶€ ë¼ì´ì„ ìŠ¤ hooksì˜ ì ì¬ì ìœ¼ë¡œ ì•…ì˜ì ì¸ êµ¬í˜„ì„ ì£¼ì˜í•˜ì„¸ìš”.
  ì„ íƒí•œ hookì˜ ì½”ë“œë¥¼ ë¨¼ì € í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. Story íŒ€ì´ ê²€í† í•˜ê±°ë‚˜
  ê°ì‚¬í•˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Warning>

### ì‚¬ìš© ê°€ëŠ¥í•œ Hooks

ë‹¤ìŒì€ ìš°ë¦¬ í”„ë¡œí† ì½œì— ë°°í¬ëœ ì‚¬ìš© ê°€ëŠ¥í•œ hooksì…ë‹ˆë‹¤.

<Info>
  ì´ëŸ¬í•œ hooksì˜ ë°°í¬ëœ ì£¼ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš” [ì—¬ê¸°](/developers/deployed-smart-contracts#license-hooks).
</Info>

| Hook                       | ì„¤ëª…                                                | ê³„ì•½ ì½”ë“œ                                                                                                                        |
| :------------------------- | :------------------------------------------------ | :--------------------------------------------------------------------------------------------------------------------------- |
| LockLicenseHook            | ë¼ì´ì„ ìŠ¤ í† í° ë°œí–‰ì´ë‚˜ ìƒˆë¡œìš´ íŒŒìƒë¬¼ ë“±ë¡ì„ ì¤‘ì§€í•©ë‹ˆë‹¤.                   | [ì—¬ê¸°ì„œ ë³´ê¸° â†—ï¸](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/hooks/LockLicenseHook.sol)            |
| TotalLicenseTokenLimitHook | ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ í† í°ì˜ ìˆ˜ëŸ‰ ì œí•œì„ ì„¤ì •í•˜ë©°, ì–¸ì œë“ ì§€ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. | [ì—¬ê¸°ì„œ ë³´ê¸° â†—ï¸](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/hooks/TotalLicenseTokenLimitHook.sol) |

### Hooks êµ¬í˜„í•˜ê¸°

<CardGroup cols={2}>
  <Card title="SDK Code Example" href="https://github.com/storyprotocol/typescript-tutorial/blob/main/scripts/licenses/oneTimeUseLicense.ts" icon="code">
    ë¼ì´ì„ ì‹± hookì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ì‘ë™í•˜ëŠ” TypeScript SDK ì½”ë“œ ì˜ˆì œì…ë‹ˆë‹¤.
    ë” êµ¬ì²´ì ìœ¼ë¡œ, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
  </Card>

  <Card title="Solidity Code Example" href="https://github.com/storyprotocol/protocol-periphery-v1/blob/main/test/hooks/TotalLicenseTokenLimitHook.t.sol" icon="code">
    ë¼ì´ì„ ì‹± hookì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ì‘ë™í•˜ëŠ” Solidity ì½”ë“œ ì˜ˆì œì…ë‹ˆë‹¤.
    ë” êµ¬ì²´ì ìœ¼ë¡œ, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
  </Card>
</CardGroup>

Licensing HooksëŠ” ê¶ê·¹ì ìœ¼ë¡œ ë‹¤ìŒ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì…ë‹ˆë‹¤ `ILicensingHook`. ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ìŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ [ì—¬ê¸°](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/interfaces/ILicensingHook.sol). ìš°ë¦¬ëŠ” ì´ë¯¸ ëª‡ ê°€ì§€ Licensing Hooksë¥¼ ë°°í¬í–ˆìŠµë‹ˆë‹¤ (ìœ„ì˜ ì°¨íŠ¸ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”).

Licensing Hookì„ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ë ¤ë©´ Licensing Configì—ì„œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ IP Assetì— ì¡°ê±´ì„ ì²¨ë¶€í•  ë•Œ License Termsì— ì„¤ì •í•˜ëŠ” êµ¬ì„± ì„¸íŠ¸ì…ë‹ˆë‹¤.

<Steps>
  <Step title="Create Licensing Config">
    ë¨¼ì € Licensing Configë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤:

    ```typescript {6-8}
    import { LicensingConfig } from '@story-protocol/core-sdk';

    const licensingConfig: LicensingConfig = {
        isSet: true,
        mintingFee: 0n,
        // address of TotalLicenseTokenLimitHook
        // from https://docs.story.foundation/developers/deployed-smart-contracts
        licensingHook: '0xaBAD364Bfa41230272b08f171E0Ca939bD600478',
        hookData: zeroAddress,
        commercialRevShare: 0,
        disabled: false,
        expectMinimumGroupRewardShare: 0,
        expectGroupRewardPool: zeroAddress,
    }
    ```
  </Step>

  <Step title="Set the Licensing Config">
    ë‹¤ìŒìœ¼ë¡œ, License Termsì— Licensing Configë¥¼ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤. ë‹¤ìŒ ì˜ˆì œì—ì„œëŠ” IP Assetì„ ë“±ë¡í•  ë•Œ ì´ ì‘ì—…ì´ ë°œìƒí•˜ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤:

    <Tip>
      ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ ì•½ê°„ì˜ ì„¤ì •ì´ í•„ìš”í•˜ë©°, TypeScript SDK ì„¤ì • ë°©ë²•ì„ ì´ë¯¸
      ì´í•´í•˜ê³  ìˆëŠ” ê°œë°œìë¥¼ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ë” ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´
      ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš” [ì‘ë™í•˜ëŠ” ì½”ë“œ
      ì˜ˆì œ](https://github.com/storyprotocol/typescript-tutorial/blob/main/scripts/licenses/oneTimeUseLicense.ts).
    </Tip>

    <Note>
      ì´ê²ƒì€ ë‹¤ìŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤ `mintAndRegisterIpAssetWithPilTerms` ë©”ì„œë“œëŠ” ë‹¤ìŒì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ [ì—¬ê¸°](/sdk-reference/ipasset#mintandregisteripassetwithpilterms).
    </Note>

    ```typescript {6-7}
    const response = await client.ipAsset.mintAndRegisterIpAssetWithPilTerms({
        spgNftContract: '0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc', // public spg contract for ease-of-use
        licenseTermsData: [
            {
                terms: { defaultMintingFee: 0, commercialUse: true, ... }, // dummy license terms
                // set the licensing config here
                licensingConfig: licensingConfig
            },
        ],
        ipMetadata: {
            ipMetadataURI: 'test-uri',
            ipMetadataHash: toHex('test-metadata-hash', { size: 32 }),
            nftMetadataHash: toHex('test-nft-metadata-hash', { size: 32 }),
            nftMetadataURI: 'test-nft-uri',
        },
        txOptions: { waitForTransaction: true },
    })
    ```
  </Step>

  <Step title="Set the Limit to 1">
    ì´ì œ ìš°ë¦¬ì˜ ì¡°ê±´ì— Licensing Configë¥¼ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ, ë‹¤ìŒì„ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ `setTotalLicenseTokenLimit` hookì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°œí–‰í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¼ì´ì„ ìŠ¤ ìˆ˜ë¥¼ 1ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.

    <Note>
      ì´ë¥¼ ìœ„í•œ Story SDK ë©”ì„œë“œê°€ ì—†ìœ¼ë¯€ë¡œ, viemì˜ ë‹¤ìŒ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤ `writeContract` ë©”ì„œë“œ.
    </Note>

    ```typescript
    import { totalLicenseTokenLimitHook } from './abi/totalLicenseTokenLimitHook'

    const { request } = await publicClient.simulateContract({
        // address of TotalLicenseTokenLimitHook
        // from https://docs.story.foundation/developers/deployed-smart-contracts
        address: '0xaBAD364Bfa41230272b08f171E0Ca939bD600478',
        abi: totalLicenseTokenLimitHook,
        functionName: 'setTotalLicenseTokenLimit',
        args: [
            response.ipId, // ipId from the step above
            '0x2E896b0b2Fdb7457499B56AAaA4AE55BCB4Cd316', // the address of PILicenseTemplate from https://docs.story.foundation/developers/deployed-smart-contracts
            response.licenseTermsIds![0], // licenseTermsId
            1n, // limit (as BigInt)
        ],
        account: account, // Specify the account to use for permission checking
    })

    // Prepare transaction
    const hash = await walletClient.writeContract({ ...request, account: account })

    // Wait for transaction to be mined
    const receipt = await publicClient.waitForTransactionReceipt({
        hash,
    })
    ```
  </Step>
</Steps>

## Commercializer Checker Hooks

<Warning>
  ë¬¸ì„œê°€ ê³§ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤. ê·¸ë™ì•ˆ ì§ˆë¬¸ì´ ìˆìœ¼ì‹œë‹¤ë©´ ë‹¤ìŒì—ì„œ ë¬¸ì˜í•˜ì„¸ìš” [Builder's Discord](https://discord.gg/storybuilders).
</Warning>
