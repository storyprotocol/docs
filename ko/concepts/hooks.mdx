---
title: ğŸª í›…
sidebarTitle: í›…
icon: fishing-rod
description: ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê±°ë‚˜ íŒŒìƒë¬¼ì„ ë“±ë¡í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
---

title: ğŸª Hooks
sidebarTitle: Hooks
icon: fishing-rod
description: ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê±°ë‚˜ íŒŒìƒë¬¼ì„ ë“±ë¡í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
[License Tokens](/concepts/licensing-module/license-token) ë˜ëŠ” íŒŒìƒë¬¼ì„ ë“±ë¡í•˜ê¸° ì „ì—.

í›…ì—ëŠ” ë‘ ê°€ì§€ ìœ í˜•ì´ ìˆìŠµë‹ˆë‹¤:

1. **ë¼ì´ì„ ì‹± í›…**: ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤[ë¼ì´ì„ ìŠ¤ í† í°ì„ ë°œí–‰í•˜ê¸° ì „ì— ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ ì¶”ê°€](/concepts/licensing-module/license-config#logic-that-is-possible-with-license-config) (ê·¸ë¦¬ê³  íŒŒìƒë¬¼ì„ ë“±ë¡í•  ë•Œë„). ì˜ˆë¥¼ ë“¤ì–´, ë™ì  ê°€ê²© ìš”ì²­, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ í† í° ìˆ˜ëŸ‰ ì œí•œ, í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë“±ì´ ìˆìŠµë‹ˆë‹¤. ë¼ì´ì„ ì‹± í›…ì€ ì–¸ì œë“ ì§€ ë¼ì´ì„ ì‹± êµ¬ì„±ì— ì¶”ê°€/ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2. **ìƒì—…í™” ê²€ì‚¬ê¸° í›…**: ë¼ì´ì„ ì‹± í›…ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì˜ ì§ì ‘ì ì¸ ë¶€ë¶„ì´ë©° ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ ì‚¬ìš©ì ì •ì˜ ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ë°˜í™˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## ë¼ì´ì„ ì‹± í›…

ì´ëŠ” ILicensingModule ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ê³„ì•½ìœ¼ë¡œ, IHookì—ì„œ í™•ì¥ë©ë‹ˆë‹¤.`ILicensingHook` ì¸í„°í˜ì´ìŠ¤ë¡œ, ì´ëŠ” `IModule`ì—ì„œ í™•ì¥ë©ë‹ˆë‹¤.

ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€, ë¼ì´ì„ ì‹± í›…ì´ beforeLicenseTransfer í•¨ìˆ˜ë¥¼ êµ¬í˜„í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë¼ì´ì„ ìŠ¤ í† í°ì´ ë°œí–‰ë˜ê¸° ì „ì— í˜¸ì¶œë˜ì–´ ì‚¬ìš©ì ì •ì˜ ë¡œì§ì„ êµ¬í˜„í•˜ê³  í•´ë‹¹ ë¼ì´ì„ ìŠ¤ í† í°ì˜ ìµœì¢… ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ê²°ì •í•©ë‹ˆë‹¤.`beforeMintLicenseTokens` í•¨ìˆ˜ë¡œ, ì´ëŠ” License Tokenì´ ë°œí–‰ë˜ê¸° ì „ì— í˜¸ì¶œë˜ì–´ [ì‚¬ìš©ì ì •ì˜ ë¡œì§](/concepts/licensing-module/license-config#logic-that-is-possible-with-license-config)ì„ êµ¬í˜„í•˜ê³  ìµœì¢… `totalMintingFee`ì„ ê²°ì •í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

<Note>
  ILicensingModule ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì„ ë³´ë ¤ë©´`ILicensingHook` ìŠ¤ë§ˆíŠ¸ ê³„ì•½
  [ì—¬ê¸°](https://github.com/storyprotocol/protocol-core-v1/blob/main/contracts/interfaces/modules/licensing/ILicensingHook.sol#L26)ë¥¼ í´ë¦­í•˜ì„¸ìš”.
</Note>

```solidity ILicensingHook.sol
/// @notice This function is called when the LicensingModule mints license tokens.
/// @dev The hook can be used to implement various checks and determine the minting price.
/// The hook should revert if the minting is not allowed.
/// @param caller The address of the caller who calling the mintLicenseTokens() function.
/// @param licensorIpId The ID of licensor IP from which issue the license tokens.
/// @param licenseTemplate The address of the license template.
/// @param licenseTermsId The ID of the license terms within the license template,
/// which is used to mint license tokens.
/// @param amount The amount of license tokens to mint.
/// @param receiver The address of the receiver who receive the license tokens.
/// @param hookData The data to be used by the licensing hook.
/// @return totalMintingFee The total minting fee to be paid when minting amount of license tokens.
function beforeMintLicenseTokens(
  address caller,
  address licensorIpId,
  address licenseTemplate,
  uint256 licenseTermsId,
  uint256 amount,
  address receiver,
  bytes calldata hookData
) external returns (uint256 totalMintingFee);
```

ì´ í•¨ìˆ˜ê°€ mintingFeeë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ì ì— ì£¼ëª©í•˜ì„¸ìš”. "ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , LicensingModuleì—ì„œë„ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë©°, beforeLicenseTransferì—ì„œ ë™ì  ê°€ê²©ì„ ë°˜í™˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ ìµœì¢… ë°œí–‰ ìˆ˜ìˆ˜ë£ŒëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?"ë¼ê³  ê¶ê¸ˆí•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ìš°ì„ ìˆœìœ„ì…ë‹ˆë‹¤:`totalMintingFee`. "ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ, `LicenseConfig`ì—ì„œ ë°œí–‰ ìˆ˜ìˆ˜ë£Œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , `beforeMintLicenseTokens`ì—ì„œ ë™ì  ê°€ê²©ì„ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œ ìµœì¢… ë°œí–‰ ìˆ˜ìˆ˜ë£ŒëŠ” ì–´ë–»ê²Œ ë ê¹Œìš”?"ë¼ê³  ê¶ê¸ˆí•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸° ìš°ì„ ìˆœìœ„ê°€ ìˆìŠµë‹ˆë‹¤:

| ë°œí–‰ ìˆ˜ìˆ˜ë£Œ                                                                                  | ì¤‘ìš”ë„    |
| --------------------------------------------------------------------------------------- | ------ |
| beforeLicenseTransferì—ì„œ ë°˜í™˜ëœ mintingFee`totalMintingFee`ì—ì„œ ë°˜í™˜ëœ `beforeMintLicenseTokens` | ìµœìš°ì„  ìˆœìœ„ |
| LicensingModuleì— ì„¤ì •ëœ mintingFee`mintingFee`ì—ì„œ ì„¤ì •ëœ `LicenseConfig`                       | â¬‡ï¸     |
| ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì— ì„¤ì •ëœ mintingFee`mintingFee` ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ ì„¤ì •ëœ                                       | ìµœí•˜ìœ„ ìˆœìœ„ |

<Warning>
  ì™¸ë¶€ ë¼ì´ì„ ìŠ¤ í›…ì˜ ì ì¬ì ìœ¼ë¡œ ì•…ì˜ì ì¸ êµ¬í˜„ì— ì£¼ì˜í•˜ì„¸ìš”.
  ì„ íƒí•œ í›…ì˜ ì½”ë“œë¥¼ ë¨¼ì € í™•ì¸í•˜ì„¸ìš”. Story íŒ€ì— ì˜í•´ ê²€í† ë˜ê±°ë‚˜
  ê°ì‚¬ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Warning>

### ì‚¬ìš© ê°€ëŠ¥í•œ í›…

ë‹¤ìŒì€ ìš°ë¦¬ í”„ë¡œí† ì½œì— ë°°í¬ëœ ì‚¬ìš© ê°€ëŠ¥í•œ í›…ë“¤ì…ë‹ˆë‹¤.

<Info>
  ì´ í›…ë“¤ì˜ ë°°í¬ëœ ì£¼ì†Œë¥¼ ë³´ë ¤ë©´ [ì—¬ê¸°](/developers/deployed-smart-contracts#license-hooks)ë¥¼ í™•ì¸í•˜ì„¸ìš”.
</Info>

| í›…                          | ì„¤ëª…                                               | ê³„ì•½ ì½”ë“œ                                                                                                                         |
| :------------------------- | :----------------------------------------------- | :---------------------------------------------------------------------------------------------------------------------------- |
| LockLicenseHook            | ë¼ì´ì„ ìŠ¤ í† í°ì˜ ë°œí–‰ ë˜ëŠ” ìƒˆë¡œìš´ íŒŒìƒë¬¼ ë“±ë¡ì„ ì¤‘ì§€í•©ë‹ˆë‹¤.                | [ì—¬ê¸°ì—ì„œ ë³´ê¸° â†—ï¸](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/hooks/LockLicenseHook.sol)            |
| TotalLicenseTokenLimitHook | ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ í† í°ì˜ ìˆ˜ëŸ‰ì— ì œí•œì„ ì„¤ì •í•˜ë©°, ì–¸ì œë“ ì§€ ì—…ë°ì´íŠ¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. | [ì—¬ê¸°ì—ì„œ ë³´ê¸° â†—ï¸](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/hooks/TotalLicenseTokenLimitHook.sol) |

### í›… êµ¬í˜„í•˜ê¸°

<CardGroup cols={2}>
  <Card title="SDK ì½”ë“œ ì˜ˆì‹œ" href="https://github.com/storyprotocol/typescript-tutorial/blob/main/scripts/licenses/oneTimeUseLicense.ts" icon="code">
    ë¼ì´ì„ ì‹± í›…ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ì‘ë™í•˜ëŠ” TypeScript SDK ì½”ë“œ ì˜ˆì‹œì…ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
  </Card>

  <Card title="Solidity ì½”ë“œ ì˜ˆì‹œ" href="https://github.com/storyprotocol/protocol-periphery-v1/blob/main/test/hooks/TotalLicenseTokenLimitHook.t.sol" icon="code">
    ë¼ì´ì„ ì‹± í›…ì„ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ëŠ” ì‘ë™í•˜ëŠ” Solidity ì½”ë“œ ì˜ˆì‹œì…ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ, ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ì˜ ìˆ˜ë¥¼ ì œí•œí•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
  </Card>
</CardGroup>

ë¼ì´ì„ ì‹± í›…ì€ ê¶ê·¹ì ìœ¼ë¡œ `ILicensingHook` ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì…ë‹ˆë‹¤. ì¸í„°í˜ì´ìŠ¤ëŠ” [ì—¬ê¸°](https://github.com/storyprotocol/protocol-periphery-v1/blob/main/contracts/interfaces/ILicensingHook.sol)ì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¯¸ ëª‡ ê°€ì§€ ë¼ì´ì„ ì‹± í›…ì„ ë°°í¬í–ˆìŠµë‹ˆë‹¤ (ìœ„ì˜ ì°¨íŠ¸ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”).

ë¼ì´ì„ ì‹± í›…ì„ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ë ¤ë©´ ë¼ì´ì„ ì‹± êµ¬ì„±ì—ì„œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ë¼ì´ì„ ì‹± êµ¬ì„±ì€ ê¸°ë³¸ì ìœ¼ë¡œ IP ìì‚°ì— ì¡°ê±´ì„ ì²¨ë¶€í•  ë•Œ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì— ì„¤ì •í•˜ëŠ” ì¼ë ¨ì˜ êµ¬ì„±ì…ë‹ˆë‹¤.

<Steps>
  <Step title="ë¼ì´ì„ ì‹± êµ¬ì„± ìƒì„±">
    ë¨¼ì € ë¼ì´ì„ ì‹± êµ¬ì„±ì„ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤:

    ```typescript {6-8}
    import { LicensingConfig } from '@story-protocol/core-sdk';

    const licensingConfig: LicensingConfig = {
        isSet: true,
        mintingFee: 0n,
        // address of TotalLicenseTokenLimitHook
        // from https://docs.story.foundation/developers/deployed-smart-contracts
        licensingHook: '0xaBAD364Bfa41230272b08f171E0Ca939bD600478',
        hookData: zeroAddress,
        commercialRevShare: 0,
        disabled: false,
        expectMinimumGroupRewardShare: 0,
        expectGroupRewardPool: zeroAddress,
    }
    ```
  </Step>

  <Step title="ë¼ì´ì„ ì‹± êµ¬ì„± ì„¤ì •">
    ë‹¤ìŒìœ¼ë¡œ, ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì— ë¼ì´ì„ ì‹± êµ¬ì„±ì„ ì„¤ì •í•©ë‹ˆë‹¤. ë‹¤ìŒ ì˜ˆì‹œì—ì„œëŠ” IP ìì‚°ì„ ë“±ë¡í•  ë•Œ ì´ ì‘ì—…ì´ ì´ë£¨ì–´ì§€ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤:

    <Tip>
      ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ ì•½ê°„ì˜ ì„¤ì •ì´ í•„ìš”í•˜ë©°, TypeScript SDK ì„¤ì • ë°©ë²•ì„ ì´ë¯¸ ì´í•´í•˜ê³  ìˆëŠ” ê°œë°œìë¥¼ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ë” ìì„¸íˆ ì•Œê³  ì‹¶ë‹¤ë©´, [ì‘ë™í•˜ëŠ” ì½”ë“œ ì˜ˆì‹œ](https://github.com/storyprotocol/typescript-tutorial/blob/main/scripts/licenses/oneTimeUseLicense.ts)ë¥¼ í™•ì¸í•˜ì„¸ìš”.
    </Tip>

    <Note>
      ì´ëŠ” `mintAndRegisterIpAssetWithPilTerms` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. [ì—¬ê¸°](/sdk-reference/ipasset#mintandregisteripassetwithpilterms)ì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </Note>

    ```typescript {6-7}
    const response = await client.ipAsset.mintAndRegisterIpAssetWithPilTerms({
        spgNftContract: '0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc', // public spg contract for ease-of-use
        licenseTermsData: [
            {
                terms: { defaultMintingFee: 0, commercialUse: true, ... }, // dummy license terms
                // set the licensing config here
                licensingConfig: licensingConfig
            },
        ],
        ipMetadata: {
            ipMetadataURI: 'test-uri',
            ipMetadataHash: toHex('test-metadata-hash', { size: 32 }),
            nftMetadataHash: toHex('test-nft-metadata-hash', { size: 32 }),
            nftMetadataURI: 'test-nft-uri',
        },
        txOptions: { waitForTransaction: true },
    })
    ```
  </Step>

  <Step title="ì œí•œì„ 1ë¡œ ì„¤ì •">
    ì´ì œ ìš°ë¦¬ì˜ ì¡°ê±´ì— ë¼ì´ì„ ì‹± êµ¬ì„±ì„ ì„¤ì •í–ˆìœ¼ë¯€ë¡œ, í›…ì˜ `setTotalLicenseTokenLimit` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°œí–‰í•  ìˆ˜ ìˆëŠ” ë¼ì´ì„ ìŠ¤ì˜ ìµœëŒ€ ìˆ˜ë¥¼ 1ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    <Note>
      ì´ë¥¼ ìœ„í•œ Story SDK ë©”ì„œë“œëŠ” ì—†ìœ¼ë¯€ë¡œ, viemì˜ `writeContract` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    </Note>

    ```typescript
    import { totalLicenseTokenLimitHook } from './abi/totalLicenseTokenLimitHook'

    const { request } = await publicClient.simulateContract({
        // address of TotalLicenseTokenLimitHook
        // from https://docs.story.foundation/developers/deployed-smart-contracts
        address: '0xaBAD364Bfa41230272b08f171E0Ca939bD600478',
        abi: totalLicenseTokenLimitHook,
        functionName: 'setTotalLicenseTokenLimit',
        args: [
            response.ipId, // ipId from the step above
            '0x2E896b0b2Fdb7457499B56AAaA4AE55BCB4Cd316', // the address of PILicenseTemplate from https://docs.story.foundation/developers/deployed-smart-contracts
            response.licenseTermsIds![0], // licenseTermsId
            1n, // limit (as BigInt)
        ],
        account: account, // Specify the account to use for permission checking
    })

    // Prepare transaction
    const hash = await walletClient.writeContract({ ...request, account: account })

    // Wait for transaction to be mined
    const receipt = await publicClient.waitForTransactionReceipt({
        hash,
    })
    ```
  </Step>
</Steps>

## ìƒì—…í™” ê²€ì‚¬ê¸° í›…

<Warning>
  ë¬¸ì„œê°€ ê³§ ì œê³µë  ì˜ˆì •ì…ë‹ˆë‹¤. ê·¸ ë™ì•ˆ ì§ˆë¬¸ì´ ìˆë‹¤ë©´ [Builder's Discord](https://discord.gg/storybuilders)ì—ì„œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.
</Warning>
