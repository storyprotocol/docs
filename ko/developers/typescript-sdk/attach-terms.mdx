---
title: IPA에 약관 첨부하기
description: TypeScript에서 IP 자산에 라이선스 약관을 첨부하는 방법을 알아보세요.
---

이 섹션에서는 [License Terms](/concepts/licensing-module/license-terms)를 [IP Asset](/concepts/ip-asset)에 첨부하는 방법을 보여줍니다. 약관을 첨부함으로써 사용자는 공개적으로 [License Tokens](/concepts/licensing-module/license-token)(온체인 "라이선스")을 해당 약관으로 IP에서 발행할 수 있습니다.

### 전제 조건

튜토리얼을 시작하기 전에 완료해야 할 몇 가지 단계가 있습니다.

1. 완료하기 [TypeScript SDK Setup](/developers/typescript-sdk/setup)

## 1. 시작하기 전에

약관을 첨부하기 위해 기존 IP 자산이 필요하지 않다는 점을 언급해야 합니다. **IP 등록 + 약관 생성 + 약관 첨부**를 동일한 함수에서 수행할 수 있는 두 가지 함수가 있습니다:

* [mintAndRegisterIpAssetWithPilTerms](/sdk-reference/ipasset#mintandregisteripassetwithpilterms)
* [registerIpAndAttachPilTerms](/sdk-reference/ipasset#registeripandattachpilterms)

## 2. 라이선스 약관 등록

IP 자산에 약관을 첨부하기 위해 먼저 약관을 생성해 보겠습니다!

[License Terms](/concepts/licensing-module/license-terms)는 해당 약관이 적용된 IP에서 발행되는 라이선스에 대한 제한사항을 정의하는 구성 가능한 값의 집합입니다. 예를 들어, "이 라이선스를 발행하면 수익의 50%를 나와 공유해야 합니다." 전체 약관 세트는 [PIL Terms](/concepts/programmable-ip-license/pil-terms)에서 확인할 수 있습니다.

<Note>
  만약 생성하려는 매개변수와 동일한 License Terms가 이미 프로토콜에 존재한다면, 다시 생성할 필요가 없으며 함수는 단순히 기존의 `licenseTermsId` 및 정의되지 않은 `txHash`. License Terms는 프로토콜 전체에 적용되므로 기존 License Terms를 다음과 같이 사용할 수 있습니다 `licenseTermsId`.
</Note>

새로운 약관을 생성하는 방법을 보여주는 코드 예시입니다:

<Info>
  관련 문서:

  [license.registerPILTerms](/sdk-reference/license#registerpilterms)
</Info>

```typescript main.ts
import { LicenseTerms } from "@story-protocol/core-sdk";
import { zeroAddress } from "viem";
// you should already have a client set up (prerequisite)
import { client } from "./utils";

async function main() {
  const licenseTerms: LicenseTerms = {
    defaultMintingFee: 0n,
    // must be a whitelisted revenue token from https://docs.story.foundation/developers/deployed-smart-contracts
    // in this case, we use $WIP
    currency: "0x1514000000000000000000000000000000000000",
    // RoyaltyPolicyLAP address from https://docs.story.foundation/developers/deployed-smart-contracts
    royaltyPolicy: "0xBe54FB168b3c982b7AaE60dB6CF75Bd8447b390E",
    transferable: false,
    expiration: 0n,
    commercialUse: false,
    commercialAttribution: false,
    commercializerChecker: zeroAddress,
    commercializerCheckerData: "0x",
    commercialRevShare: 0,
    commercialRevCeiling: 0n,
    derivativesAllowed: false,
    derivativesAttribution: false,
    derivativesApproval: false,
    derivativesReciprocal: false,
    derivativeRevCeiling: 0n,
    uri: "",
  };

  const response = await client.license.registerPILTerms({
    ...licenseTerms,
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `PIL Terms registered at transaction hash ${response.txHash}, License Terms ID: ${response.licenseTermsId}`
  );
}

main();
```

### 2a. PIL Flavors

위에서 보시다시피, 많은 약관 중에서 선택해야 합니다.

새로운 약관을 등록하는 데 도움이 되는 편의 기능이 있습니다. 우리는 [PIL Flavors](/concepts/programmable-ip-license/pil-flavors)를 만들었습니다. 이는 사용할 약관을 결정하는 데 도움이 되는 인기 있는 License Terms 조합이 미리 구성되어 있습니다. 다음과 같은 편의 기능을 사용하여 이러한 PIL Flavors를 확인하고 약관을 등록할 수 있습니다:

<CardGroup cols={4}>
  <Card title="Non-Commercial Social Remixing" href="/concepts/programmable-ip-license/pil-flavors#flavor-%231%3A-non-commercial-social-remixing" icon="file">
    저작자 표시와 함께 무료 리믹스. 상업적 이용 불가.
  </Card>

  {" "}

  <Card title="Commercial Use" href="/concepts/programmable-ip-license/pil-flavors#flavor-%232%3A-commercial-use" icon="file">
    저작자 표시와 함께 라이선스 사용료 지불, 수익 공유는 필요 없음.
  </Card>

  {" "}

  <Card title="Commercial Remix" href="/concepts/programmable-ip-license/pil-flavors#flavor-%233%3A-commercial-remix" icon="file">
    저작자 표시와 함께 라이선스 사용료 지불 및 수익의 일정 비율 지불.
  </Card>

  <Card title="Creative Commons Attribution" href="/concepts/programmable-ip-license/pil-flavors#flavor-%234%3A-creative-commons-attribution" icon="file">
    저작자 표시와 함께 무료 리믹스 및 상업적 이용 가능.
  </Card>
</CardGroup>

## 3. License Terms 첨부

이제 약관을 생성하고 관련된 `licenseTermsId`를 가지고 있으므로, 다음과 같이 기존 IP Asset에 첨부할 수 있습니다:

<Info>
  관련 문서:

  [license.attachLicenseTerms](/sdk-reference/license#attachlicenseterms)
</Info>

```typescript main.ts
import { LicenseTerms } from "@story-protocol/core-sdk";
import { zeroAddress } from "viem";
// you should already have a client set up (prerequisite)
import { client } from "./utils";

async function main() {
  // previous code here ...

  const response = await client.license.attachLicenseTerms({
    // insert your newly created license terms id here
    licenseTermsId: LICENSE_TERMS_ID,
    // insert the ipId you want to attach terms to here
    ipId: "0x4c1f8c1035a8cE379dd4ed666758Fb29696CF721",
    txOptions: { waitForTransaction: true },
  });

  if (response.success) {
    console.log(
      `Attached License Terms to IPA at transaction hash ${response.txHash}.`
    );
  } else {
    console.log(`License Terms already attached to this IPA.`);
  }
}

main();
```

### 3a. 약관 생성 + 첨부

언급할 가치가 있는 것은 **약관 생성 + 약관 첨부**를 [registerPilTermsAndAttach](/sdk-reference/ipasset#registerpiltermsandattach) 함수를 사용하여 한 번에 할 수 있다는 것입니다. 가장 편한 방법을 선택하세요!

그리고, 처음에 언급했듯이, **IP 등록 + 약관 생성 + 약관 첨부**를 동일한 함수에서 수행할 수 있는 두 가지 함수가 있습니다:

* [mintAndRegisterIpAssetWithPilTerms](/sdk-reference/ipasset#mintandregisteripassetwithpilterms)
* [registerIpAndAttachPilTerms](/sdk-reference/ipasset#registeripandattachpilterms)

## 4. 라이선스 발행

이제 우리의 IP에 License Terms를 첨부했으므로, 다음 단계는 다음 페이지에서 다룰 License Token을 발행하는 것입니다.
