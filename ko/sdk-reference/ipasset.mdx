---
title: IP Asset
description: IPAssetClientë¥¼ ì‚¬ìš©í•˜ì—¬ Story ë‚´ì—ì„œ IP Assetì„ ìƒì„±, ì¡°íšŒ ë° ë‚˜ì—´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
---

## IPAssetClient

### ë©”ì†Œë“œ

* register
* registerDerivative
* registerDerivativeWithLicenseTokens
* mintAndRegisterIpAssetWithPilTerms
* registerIpAndAttachPilTerms
* registerDerivativeIp
* mintAndRegisterIpAndMakeDerivative
* mintAndRegisterIp
* registerPilTermsAndAttach
* mintAndRegisterIpAndMakeDerivativeWithLicenseTokens
* registerIpAndMakeDerivativeWithLicenseTokens

### IPAssetClient ë‘˜ëŸ¬ë³´ê¸°

ë¼ì´ì„ ì‹± ëª¨ë“ˆê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ë§ì€ í•¨ìˆ˜ë“¤ì´ ìˆê¸° ë•Œë¬¸ì— [ğŸ“œ Licensing Module](/concepts/licensing-module), ì°¾ê³ ì í•˜ëŠ” ê²ƒì„ ì‹ë³„í•˜ê³  ê´€ë ¨ ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë„ì›€ì´ ë˜ëŠ” ì°¨íŠ¸ë¡œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

| **í•¨ìˆ˜**                                                                                      | **NFT ë°œí–‰** | **IPA ë“±ë¡** | **ë¼ì´ì„ ìŠ¤ ì¡°ê±´ ìƒì„±** | **ë¼ì´ì„ ìŠ¤ ì¡°ê±´ ì²¨ë¶€** | **ë¼ì´ì„ ìŠ¤ í† í° ë°œí–‰** | **íŒŒìƒì‘ìœ¼ë¡œ ë“±ë¡** |
| ------------------------------------------------------------------------------------------- | :--------: | :--------: | :------------: | :------------: | :------------: | :----------: |
| <span style={{color: "#e03130"}}>register</span>                                            |            |      âœ“     |                |                |                |              |
| <span style={{color: "#e03130"}}>mintAndRegisterIp</span>                                   |      âœ“     |      âœ“     |                |                |                |              |
| <span style={{color: "#e03130"}}>registerIpAndAttachPilTerms</span>                         |            |      âœ“     |        âœ“       |        âœ“       |                |              |
| <span style={{color: "#e03130"}}>mintAndRegisterIpAssetWithPilTerms</span>                  |      âœ“     |      âœ“     |        âœ“       |        âœ“       |                |              |
| <span style={{color: "#e03130"}}>registerDerivativeIp</span>                                |            |      âœ“     |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>mintAndRegisterIpAndMakeDerivativeWithLicenseTokens</span> |      âœ“     |      âœ“     |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>registerIpAndMakeDerivativeWithLicenseTokens</span>        |            |      âœ“     |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>mintAndRegisterIpAndMakeDerivative</span>                  |      âœ“     |      âœ“     |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>registerDerivative</span>                                  |            |            |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>registerDerivativeWithLicenseTokens</span>                 |            |            |                |                |                |       âœ“      |
| <span style={{color: "#e03130"}}>registerPilTermsAndAttach</span>                           |            |            |        âœ“       |        âœ“       |                |              |
| <span style={{color: "#1971c2"}}>registerPILTerms</span>                                    |            |            |        âœ“       |                |                |              |
| <span style={{color: "#1971c2"}}>attachLicenseTerms</span>                                  |            |            |                |        âœ“       |                |              |
| <span style={{color: "#1971c2"}}>mintLicenseTokens</span>                                   |            |            |                |                |        âœ“       |              |

* <span style={{ color: "#e03130" }}>ë¹¨ê°„ìƒ‰</span>: IPAssetClient (í˜„ì¬ í˜ì´ì§€)
* <span style={{ color: "#1971c2" }}>íŒŒë€ìƒ‰</span>:
  [LicenseClient](/sdk-reference/license)

## register

NFTë¥¼ IPë¡œ ë“±ë¡í•˜ê³  í•´ë‹¹í•˜ëŠ” [ğŸ§© IP Asset](/concepts/ip-asset)ì„ ìƒì„±í•©ë‹ˆë‹¤. ì£¼ì–´ì§„ NFTê°€ ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆë‹¤ë©´, ì´ í•¨ìˆ˜ëŠ” ê¸°ì¡´ì˜ `ipId`ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

<Note title="NFT Metadata">
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ë¥¼ ì•„ë˜ì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì†Œë“œ        | íƒ€ì…                                                          |
| ---------- | ----------------------------------------------------------- |
| `register` | `(request: RegisterRequest) => Promise<RegisterIpResponse>` |

Parameters:

* `request.nftContract`: NFTì˜ ì£¼ì†Œ.
* `request.tokenId`: NFTì˜ í† í° ì‹ë³„ì.
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë°œí–‰ëœ NFTì™€ ìƒˆë¡œ ë“±ë¡ëœ IPì— ëŒ€í•œ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.deadline`: \[ì„ íƒì‚¬í•­] ì„œëª…ì˜ ë§Œë£Œ ì‹œê°„(ë°€ë¦¬ì´ˆ). **ê¸°ë³¸ê°’ì€ 1000**ì…ë‹ˆë‹¤.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [options](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex } from "viem";

  const response = await client.ipAsset.register({
    nftContract: "0x041B4F29183317Fd352AE57e331154b73F8a1D73",
    tokenId: "12",
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Root IPA created at transaction hash ${response.txHash}, IPA ID: ${response.ipId}`
  );
  ```

  ```typescript Request Type
  export type RegisterRequest = {
    nftContract: Address;
    tokenId: string | number | bigint;
    deadline?: string | number | bigint;
  } & IpMetadataAndTxOptions;
  ```

  ```typescript Response Type
  export type RegisterIpResponse = {
    txHash?: string;
    encodedTxData?: EncodedTxData;
    ipId?: Address;
  };
  ```
</CodeGroup>

## batchRegister

NFTë¥¼ IPë¡œ ì¼ê´„ ë“±ë¡í•˜ì—¬ í•´ë‹¹í•˜ëŠ” IP ê¸°ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤.

| ë©”ì†Œë“œ             | íƒ€ì…                                                                  |
| --------------- | ------------------------------------------------------------------- |
| `batchRegister` | `(request: BatchRegisterRequest) => Promise<BatchRegisterResponse>` |

## registerDerivative

ë¼ì´ì„ ìŠ¤ í† í° ì—†ì´ ë¶€ëª¨ IPì˜ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ìœ¼ë¡œ ì§ì ‘ íŒŒìƒì‘ì„ ë“±ë¡í•˜ê³ , ë¶€ëª¨ IPì˜ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì„ íŒŒìƒ IPì— ì²¨ë¶€í•©ë‹ˆë‹¤.

ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê¸° ì „ì— ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì´ ë¶€ëª¨ IPì— ì²¨ë¶€ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

ëª¨ë“  IPì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê¸°ë³¸ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì´ ì²¨ë¶€ë©ë‹ˆë‹¤.

íŒŒìƒ IP ì†Œìœ ìëŠ” í˜¸ì¶œìì´ê±°ë‚˜ ìŠ¹ì¸ëœ ìš´ì˜ìì—¬ì•¼ í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                  | íƒ€ì…                                                                            |
| -------------------- | ----------------------------------------------------------------------------- |
| `registerDerivative` | `(request: RegisterDerivativeRequest) => Promise<RegisterDerivativeResponse>` |

Parameters:

* `request.childIpId`: íŒŒìƒ IP ID.
* `request.licenseTermsIds`: ì´ íŒŒìƒ IPì˜ ìƒì„±ì„ ìŠ¹ì¸í•˜ëŠ” ë¼ì´ì„ ìŠ¤ ì¡°ê±´ IDì˜ ë°°ì—´. ê° IDëŠ” ìœ„ì¹˜ìƒìœ¼ë¡œ `parentIpIds` ë°°ì—´ì˜ ìƒìœ„ IPì™€ ì¼ëŒ€ì¼ë¡œ ë§¤í•‘ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. StoryëŠ” ê° ì§€ì •ëœ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì´ í•´ë‹¹ ìƒìœ„ IPì— ëŒ€í•œ íŒŒìƒ ë“±ë¡ì„ í—ˆìš©í•˜ëŠ”ì§€ ì˜¨ì²´ì¸ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤. ë°°ì—´ì˜ ê¸¸ì´ê°€ ì¼ì¹˜í•˜ì§€ ì•Šê±°ë‚˜ ì¡°ê±´ì´ íŒŒìƒ ìƒì„±ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° íŠ¸ëœì­ì…˜ì´ ì‹¤íŒ¨í•©ë‹ˆë‹¤.
* `request.parentIpIds`: ì´ íŒŒìƒë¬¼ì´ ìƒì„±ë˜ëŠ” ìƒìœ„ IP IDì˜ ë°°ì—´. ê° ìƒìœ„ IPëŠ” `licenseTermsIds` ë°°ì—´ì˜ ë™ì¼í•œ ì¸ë±ìŠ¤ì— ì§€ì •ëœ í•´ë‹¹ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì´ íŒŒìƒ ê´€ê³„ë¥¼ ìŠ¹ì¸í•´ì•¼ í•©ë‹ˆë‹¤.
* `request.licenseTemplate`: \[ì„ íƒì‚¬í•­] ì—°ê²°ì— ì‚¬ìš©ë  ë¼ì´ì„ ìŠ¤ í…œí”Œë¦¿ì˜ ì£¼ì†Œ. í˜„ì¬ëŠ” [PIL](/concepts/programmable-ip-license)
* `request.maxMintingFee`: \[ì„ íƒì‚¬í•­] í˜¸ì¶œìê°€ ì§€ë¶ˆí•˜ê³ ì í•˜ëŠ” ìµœëŒ€ ë°œí–‰ ìˆ˜ìˆ˜ë£Œ. 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤.**Default: 0**
* `request.maxRevenueShare`: \[ì„ íƒì‚¬í•­] ìì‹ì´ íŒŒìƒë¬¼ë¡œ ë“±ë¡í•  ë•Œ ìì‹ê³¼ ë¶€ëª¨ ê°„ì— í•©ì˜ëœ ìµœëŒ€ ìˆ˜ìµ ê³µìœ  ë¹„ìœ¨. 0ì—ì„œ 100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.**Default: 100**
* `request.maxRts`: \[ì„ íƒì‚¬í•­] ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.**Default: 100\_000\_000**
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [options](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  const response = await client.ipAsset.registerDerivative({
    childIpId: "0xC92EC2f4c86458AFee7DD9EB5d8c57920BfCD0Ba",
    parentIpIds: ["0xC92EC2f4c86458AFee7DD9EB5d8c57920BfCD0Ba"],
    licenseTermsIds: ["5"],
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Derivative IPA linked to parent at transaction hash ${response.txHash}`
  );
  ```

  ```typescript Request Type
  export type RegisterDerivativeRequest = {
    txOptions?: TxOptions;
    childIpId: Address;
  } & DerivativeData &
    WithWipOptions;

  export type DerivativeData = {
    parentIpIds: Address[];
    licenseTermsIds: bigint[] | string[] | number[];
    maxMintingFee: bigint | string | number;
    maxRts: number | string;
    maxRevenueShare: number | string;
    licenseTemplate?: Address;
  };
  ```

  ```typescript Response Type
  export type RegisterDerivativeResponse = {
    txHash?: Hex;
    encodedTxData?: EncodedTxData;
  };
  ```
</CodeGroup>

## registerDerivativeWithLicenseTokens

ë¼ì´ì„ ìŠ¤ í† í°ìœ¼ë¡œ íŒŒìƒë¬¼ì„ ë“±ë¡í•©ë‹ˆë‹¤.

íŒŒìƒ IPëŠ” ìƒìœ„ IPì˜ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì—ì„œ ë°œí–‰ëœ ë¼ì´ì„ ìŠ¤ í† í°ìœ¼ë¡œ ë“±ë¡ë©ë‹ˆë‹¤.

ë¼ì´ì„ ìŠ¤ í† í°ìœ¼ë¡œ ë°œí–‰ëœ ìƒìœ„ IPì˜ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì´ íŒŒìƒ IPì— ì²¨ë¶€ë©ë‹ˆë‹¤.

í˜¸ì¶œìëŠ” íŒŒìƒ IP ì†Œìœ ìì´ê±°ë‚˜ ìŠ¹ì¸ëœ ìš´ì˜ìì—¬ì•¼ í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                                   | íƒ€ì…                                                                                                              |
| ------------------------------------- | --------------------------------------------------------------------------------------------------------------- |
| `registerDerivativeWithLicenseTokens` | `(request: RegisterDerivativeWithLicenseTokensRequest) => Promise<RegisterDerivativeWithLicenseTokensResponse>` |

Parameters:

* `request.childIpId`: íŒŒìƒ IP ID.
* `request.licenseTokenIds`: ë¼ì´ì„ ìŠ¤ í† í°ì˜ ID.
* `request.maxRts`: ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **ë‹¨ìˆœí™”ë¥¼ ìœ„í•œ ê¶Œì¥ê°’: 100\_000\_000**
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [options](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  const response = await client.ipAsset.registerDerivativeWithLicenseTokens({
    childIpId: "0xC92EC2f4c86458AFee7DD9EB5d8c57920BfCD0Ba",
    licenseTokenIds: ["5"], // array of license ids relevant to the creation of the derivative, minted from the parent IPA
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Derivative IPA linked to parent at transaction hash ${response.txHash}`
  );
  ```

  ```typescript Request Type
  export type RegisterDerivativeWithLicenseTokensRequest = {
    childIpId: Address;
    licenseTokenIds: string[] | bigint[] | number[];
    maxRts: number | string;
    txOptions?: TxOptions;
  };
  ```

  ```typescript Response Type
  export type RegisterDerivativeWithLicenseTokensResponse = {
    txHash?: string;
    encodedTxData?: EncodedTxData;
  };
  ```
</CodeGroup>

## mintAndRegisterIpAssetWithPilTerms

ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ë°œí–‰í•˜ê³ , IPë¡œ ë“±ë¡í•˜ê³ , IPì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ê³ , IPì— ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì„ ì²¨ë¶€í•˜ëŠ” ëª¨ë“  ì‘ì—…ì„ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ì„ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                                  | íƒ€ì…                                                                                                            |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------- |
| `mintAndRegisterIpAssetWithPilTerms` | `(request: MintAndRegisterIpAssetWithPilTermsRequest) => Promise<MintAndRegisterIpAssetWithPilTermsResponse>` |

Parameters:

* `request.spgNftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.allowDuplicates`: \[ì„ íƒì‚¬í•­] ë™ì¼í•œ NFT ë©”íƒ€ë°ì´í„°ë¡œ IP ë°œí–‰ì„ í—ˆìš©í•˜ë ¤ë©´ trueë¡œ ì„¤ì •í•˜ì„¸ìš”.**Default: true**
* `request.licenseTermsData[]`: ì²¨ë¶€í•  ë¼ì´ì„ ìŠ¤ ì¡°ê±´ ë°°ì—´. âš ï¸ **ë¹ˆ ë°°ì—´ì„ ì „ë‹¬í•˜ë©´ ì´ í•¨ìˆ˜ëŠ” ì‹¤íŒ¨í•©ë‹ˆë‹¤.**
  * `request.licenseTermsData.terms`: ë‹¤ìŒì„ ì°¸ì¡°í•˜ì„¸ìš” [LicenseTerms type](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/resources/license.ts#L26).
  * `request.licenseTermsData.licensingConfig`: \[ì„ íƒì‚¬í•­] ë‹¤ìŒì„ ì°¸ì¡°í•˜ì„¸ìš” [LicensingConfig type](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/common.ts#L15). ì œê³µë˜ì§€ ì•Šìœ¼ë©´ [here](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/utils/validateLicenseConfig.ts).
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë°œí–‰ëœ NFTì™€ ìƒˆë¡œ ë“±ë¡ëœ IPì˜ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI`: \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash`: \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI`: \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash`: \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.recipient`: \[ì„ íƒì‚¬í•­] ë°œí–‰ëœ NFTë¥¼ ë°›ì„ ìˆ˜ì‹ ìì˜ ì£¼ì†Œ.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [options](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { LicenseTerms } from "@story-protocol/core-sdk";
  import { zeroAddress } from "viem";

  const commercialRemixTerms: LicenseTerms = {
    transferable: true,
    royaltyPolicy: "0xBe54FB168b3c982b7AaE60dB6CF75Bd8447b390E", // RoyaltyPolicyLAP address from https://docs.story.foundation/docs/deployed-smart-contracts
    defaultMintingFee: 0n,
    expiration: 0n,
    commercialUse: true,
    commercialAttribution: true,
    commercializerChecker: zeroAddress,
    commercializerCheckerData: zeroAddress,
    commercialRevShare: 50, // can claim 50% of derivative revenue
    commercialRevCeiling: 0n,
    derivativesAllowed: true,
    derivativesAttribution: true,
    derivativesApproval: false,
    derivativesReciprocal: true,
    derivativeRevCeiling: 0n,
    currency: "0x1514000000000000000000000000000000000000", // $WIP address from https://docs.story.foundation/docs/deployed-smart-contracts
    uri: "",
  };

  const response = await client.ipAsset.mintAndRegisterIpAssetWithPilTerms({
    spgNftContract: "0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc",
    licenseTermsData: [{ terms: commercialRemixTerms }],
    // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });

  console.log(`
    Token ID: ${response.tokenId}, 
    IPA ID: ${response.ipId}, 
    License Terms ID: ${response.licenseTermsId}
  `);
  ```

  ```typescript Request Type
  export type MintAndRegisterIpAssetWithPilTermsRequest = {
    spgNftContract: Address;
    allowDuplicates: boolean;
    licenseTermsData: LicenseTermsData<
      RegisterPILTermsRequest,
      LicensingConfig
    >[];
    recipient?: Address;
    royaltyPolicyAddress?: Address;
  } & IpMetadataAndTxOptions &
    WithWipOptions;
  ```

  ```typescript Response Type
  export type MintAndRegisterIpAssetWithPilTermsResponse = {
    txHash?: Hex;
    encodedTxData?: EncodedTxData;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
    licenseTermsIds?: bigint[];
  };
  ```
</CodeGroup>

## batchMintAndRegisterIpAssetWithPilTerms

ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ì¼ê´„ ë°œí–‰í•˜ê³  IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                                       | íƒ€ì…                                                                                                                      |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `batchMintAndRegisterIpAssetWithPilTerms` | `(request: BatchMintAndRegisterIpAssetWithPilTermsRequest) => Promise<BatchMintAndRegisterIpAssetWithPilTermsResponse>` |

## registerIpAndAttachPilTerms

ì£¼ì–´ì§„ NFTë¥¼ IPë¡œ ë“±ë¡í•˜ê³ , IPì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ê³ , IPì— ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì„ ì²¨ë¶€í•˜ëŠ” ëª¨ë“  ì‘ì—…ì„ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ì„ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                           | íƒ€ì…                                                                                              |
| ----------------------------- | ----------------------------------------------------------------------------------------------- |
| `registerIpAndAttachPilTerms` | `(request: RegisterIpAndAttachPilTermsRequest) => Promise<RegisterIpAndAttachPilTermsResponse>` |

Parameters:

* `request.nftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.tokenId`: NFTì˜ ID.
* `request.licenseTermsData[]`: ì²¨ë¶€í•  ë¼ì´ì„ ìŠ¤ ì¡°ê±´ ë°°ì—´. âš ï¸ **ë¹ˆ ë°°ì—´ì„ ì „ë‹¬í•˜ë©´ ì´ í•¨ìˆ˜ëŠ” ì‹¤íŒ¨í•©ë‹ˆë‹¤.**
  * `request.licenseTermsData.terms`: ë‹¤ìŒì„ ì°¸ì¡°í•˜ì„¸ìš” [LicenseTerms íƒ€ì…](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/resources/license.ts#L26).
  * `request.licenseTermsData.licensingConfig`: \[ì„ íƒì‚¬í•­] ë‹¤ìŒì„ ì°¸ì¡°í•˜ì„¸ìš” [LicensingConfig íƒ€ì…](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/common.ts#L15). ì œê³µë˜ì§€ ì•Šì€ ê²½ìš° [ì—¬ê¸°](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/utils/validateLicenseConfig.ts)ì— í‘œì‹œëœ ê¸°ë³¸ê°’ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë°œí–‰ëœ NFTì™€ ìƒˆë¡œ ë“±ë¡ëœ IPì— ëŒ€í•œ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI`: \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash`: \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI`: \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash`: \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.deadline`: \[ì„ íƒì‚¬í•­] ì„œëª…ì˜ ìœ íš¨ê¸°ê°„(ë°€ë¦¬ì´ˆ). **ê¸°ë³¸ê°’ì€ 1000**.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { LicenseTerms } from "@story-protocol/core-sdk";
  import { toHex, zeroAddress } from "viem";

  const commercialRemixTerms: LicenseTerms = {
    transferable: true,
    royaltyPolicy: "0xBe54FB168b3c982b7AaE60dB6CF75Bd8447b390E", // RoyaltyPolicyLAP address from https://docs.story.foundation/docs/deployed-smart-contracts
    defaultMintingFee: 0n,
    expiration: 0n,
    commercialUse: true,
    commercialAttribution: true,
    commercializerChecker: zeroAddress,
    commercializerCheckerData: zeroAddress,
    commercialRevShare: 50, // can claim 50% of derivative revenue
    commercialRevCeiling: 0n,
    derivativesAllowed: true,
    derivativesAttribution: true,
    derivativesApproval: false,
    derivativesReciprocal: true,
    derivativeRevCeiling: 0n,
    currency: "0x1514000000000000000000000000000000000000", // $WIP address from https://docs.story.foundation/docs/deployed-smart-contracts
    uri: "",
  };

  const response = await client.ipAsset.registerIpAndAttachPilTerms({
    nftContract: "0x041B4F29183317Fd352AE57e331154b73F8a1D73",
    tokenId: "12",
    licenseTermsData: [{ terms: commercialRemixTerms }],
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });
  console.log(
    `Root IPA created at transaction hash ${response.txHash}, IPA ID: ${response.ipId}`
  );
  ```

  ```typescript Request Type
  export type RegisterIpAndAttachPilTermsRequest = {
    nftContract: Address;
    tokenId: bigint | string | number;
    licenseTermsData: LicenseTermsData<
      RegisterPILTermsRequest,
      LicensingConfig
    >[];
    deadline?: bigint | number | string;
  } & IpMetadataAndTxOptions;
  ```

  ```typescript Response Type
  export type RegisterIpAndAttachPilTermsResponse = {
    txHash?: Hex;
    encodedTxData?: EncodedTxData;
    ipId?: Address;
    licenseTermsIds?: bigint[];
    tokenId?: bigint;
  };
  ```
</CodeGroup>

## registerDerivativeIp

ë¼ì´ì„ ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  NFTë¥¼ IPë¡œ ë“±ë¡í•˜ê³  ë‹¤ë¥¸ IP ìì‚°ì˜ íŒŒìƒë¬¼ë¡œ ì—°ê²°í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ê¸°ë³¸ NFTì˜ `tokenUri`ë¥¼ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                    | íƒ€ì…                                                                                              |
| ---------------------- | ----------------------------------------------------------------------------------------------- |
| `registerDerivativeIp` | `(request: RegisterIpAndMakeDerivativeRequest) => Promise<RegisterIpAndMakeDerivativeResponse>` |

Parameters:

* `request.nftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.tokenId`: NFTì˜ ID.
* `request.derivData`: registerDerivativeì— ì‚¬ìš©ë  íŒŒìƒ ë°ì´í„°.
  * `request.derivData.parentIpIds`: ë“±ë¡ëœ íŒŒìƒ IPë¥¼ ì—°ê²°í•  ë¶€ëª¨ IPì˜ IDë“¤.
  * `request.derivData.licenseTermsIds`: ì—°ê²°ì— ì‚¬ìš©ë  ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì˜ IDë“¤.
  * `request.derivData.maxMintingFee`: \[ì„ íƒì‚¬í•­] í˜¸ì¶œìê°€ ì§€ë¶ˆí•˜ê³ ì í•˜ëŠ” ìµœëŒ€ ë°œí–‰ ìˆ˜ìˆ˜ë£Œ. 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤. **Default: 0**
  * `request.derivData.maxRevenueShare`: \[ì„ íƒì‚¬í•­] ìì‹ì´ íŒŒìƒë¬¼ë¡œ ë“±ë¡í•  ë•Œ ìì‹ê³¼ ë¶€ëª¨ ê°„ì— í•©ì˜ëœ ìµœëŒ€ ìˆ˜ìµ ê³µìœ  ë¹„ìœ¨. 0ì—ì„œ 100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **Default: 100**
  * `request.derivData.maxRts`: \[ì„ íƒì‚¬í•­] ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **Default: 100\_000\_000**
  * `request.derivData.licenseTemplate`: \[ì„ íƒì‚¬í•­] ì—°ê²°ì— ì‚¬ìš©ë  ë¼ì´ì„ ìŠ¤ í…œí”Œë¦¿ì˜ ì£¼ì†Œ. í˜„ì¬ëŠ” [PIL](/concepts/programmable-ip-license)
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë°œí–‰ëœ NFTì™€ ìƒˆë¡œ ë“±ë¡ëœ IPì— ëŒ€í•œ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.deadline`: \[ì„ íƒì‚¬í•­] ì„œëª…ì˜ ìœ íš¨ê¸°ê°„(ë°€ë¦¬ì´ˆ). **ê¸°ë³¸ê°’ì€ 1000**.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex } from "viem";

  const response = await client.ipAsset.registerDerivativeIp({
    nftContract: "0x041B4F29183317Fd352AE57e331154b73F8a1D73", // your NFT contract address
    tokenId: "127",
    derivData: {
      parentIpIds: ["0xd142822Dc1674154EaF4DDF38bbF7EF8f0D8ECe4"],
      licenseTermsIds: ["1"],
    },
    // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Completed at transaction hash ${response.txHash}, IPA ID: ${response.ipId}`
  );
  ```

  ```typescript Request Type
  export type RegisterIpAndMakeDerivativeRequest = {
    nftContract: Address;
    tokenId: string | number | bigint;
    deadline?: string | number | bigint;
    derivData: DerivativeData;
  } & IpMetadataAndTxOptions &
    WithWipOptions;

  export type DerivativeData = {
    parentIpIds: Address[];
    licenseTermsIds: bigint[] | string[] | number[];
    /**
     * The maximum minting fee that the caller is willing to pay. if set to 0 then no limit.
     * @default 0
     */
    maxMintingFee?: bigint | string | number;
    /**
     * The maximum number of royalty tokens that can be distributed to the external royalty policies (max: 100,000,000).
     * @default 100_000_000
     */
    maxRts?: number | string;
    /**
     * The maximum revenue share percentage allowed for minting the License Tokens. Must be between 0 and 100 (where 100% represents 100_000_000).
     * @default 100
     */
    maxRevenueShare?: number | string;
    licenseTemplate?: Address;
  };
  ```

  ```typescript Response Type
  export type RegisterIpAndMakeDerivativeResponse = {
    txHash?: Hex;
    encodedTxData?: EncodedTxData;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
  };
  ```
</CodeGroup>

## batchRegisterDerivative

ë¶€ëª¨ IPì˜ ë¼ì´ì„ ìŠ¤ ì¡°ê±´ìœ¼ë¡œ íŒŒìƒë¬¼ì„ ì¼ê´„ ë“±ë¡í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                       | íƒ€ì…                                                                                      |
| ------------------------- | --------------------------------------------------------------------------------------- |
| `batchRegisterDerivative` | `(request: BatchRegisterDerivativeRequest) => Promise<BatchRegisterDerivativeResponse>` |

## mintAndRegisterIpAndMakeDerivative

ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ë°œí–‰í•˜ê³  ë¼ì´ì„ ìŠ¤ í† í° ì—†ì´ íŒŒìƒ IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ê¸°ë³¸ NFTì˜ `tokenUri`ë¥¼ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                                  | íƒ€ì…                                                                                                            |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------- |
| `mintAndRegisterIpAndMakeDerivative` | `(request: MintAndRegisterIpAndMakeDerivativeRequest) => Promise<MintAndRegisterIpAndMakeDerivativeResponse>` |

Parameters:

* `request.spgNftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.allowDuplicates`: \[ì„ íƒì‚¬í•­] ë™ì¼í•œ NFT ë©”íƒ€ë°ì´í„°ë¡œ IPë¥¼ ë°œí–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ë ¤ë©´ trueë¡œ ì„¤ì •í•˜ì„¸ìš”. **Default: true**
* `request.derivData`: registerDerivativeì— ì‚¬ìš©ë  íŒŒìƒ ë°ì´í„°.
  * `request.derivData.parentIpIds`: ë“±ë¡ëœ íŒŒìƒ IPë¥¼ ì—°ê²°í•  ë¶€ëª¨ IPì˜ IDë“¤.
  * `request.derivData.licenseTermsIds`: ì—°ê²°ì— ì‚¬ìš©ë  ë¼ì´ì„ ìŠ¤ ì¡°ê±´ì˜ IDë“¤.
  * `request.derivData.maxMintingFee`: \[ì„ íƒì‚¬í•­] í˜¸ì¶œìê°€ ì§€ë¶ˆí•˜ê³ ì í•˜ëŠ” ìµœëŒ€ ë°œí–‰ ìˆ˜ìˆ˜ë£Œ. 0ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ì œí•œì´ ì—†ìŠµë‹ˆë‹¤. **Default: 0**
  * `request.derivData.maxRevenueShare`: \[ì„ íƒì‚¬í•­] ìì‹ì´ íŒŒìƒë¬¼ë¡œ ë“±ë¡í•  ë•Œ ìì‹ê³¼ ë¶€ëª¨ ê°„ì— í•©ì˜ëœ ìµœëŒ€ ìˆ˜ìµ ê³µìœ  ë¹„ìœ¨. 0ì—ì„œ 100 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **Default: 100**
  * `request.derivData.maxRts`: \[ì„ íƒì‚¬í•­] ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **Default: 100\_000\_000**
  * `request.derivData.licenseTemplate`: \[ì„ íƒì‚¬í•­] ì—°ê²°ì— ì‚¬ìš©ë  ë¼ì´ì„ ìŠ¤ í…œí”Œë¦¿ì˜ ì£¼ì†Œ. í˜„ì¬ëŠ” [PIL](/concepts/programmable-ip-license)
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë°œí–‰ëœ NFTì™€ ìƒˆë¡œ ë“±ë¡ëœ IPì— ëŒ€í•œ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.recipient`: \[ì„ íƒì‚¬í•­] ë°œí–‰ëœ NFTë¥¼ ë°›ì„ ìˆ˜ì‹ ìì˜ ì£¼ì†Œ, ê¸°ë³¸ê°’ì€ ê·€í•˜ì˜ ì§€ê°‘ ì£¼ì†Œì…ë‹ˆë‹¤.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex } from "viem";

  const response = await client.ipAsset.mintAndRegisterIpAndMakeDerivative({
    // an NFT contract address created by the SPG
    spgNftContract: "0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc",
    derivData: {
      parentIpIds: ["0xd142822Dc1674154EaF4DDF38bbF7EF8f0D8ECe4"],
      licenseTermsIds: ["1"],
    },
    // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Completed at transaction hash ${response.txHash}, IPA ID: ${response.ipId}, Token ID: ${response.tokenId}`
  );
  ```

  ```typescript Request Type
  export type MintAndRegisterIpAndMakeDerivativeRequest = {
    spgNftContract: Address;
    derivData: DerivativeData;
    recipient?: Address;
    allowDuplicates: boolean;
  } & IpMetadataAndTxOptions &
    WithWipOptions;

  export type DerivativeData = {
    parentIpIds: Address[];
    licenseTermsIds: bigint[] | string[] | number[];
    /**
     * The maximum minting fee that the caller is willing to pay. if set to 0 then no limit.
     * @default 0
     */
    maxMintingFee?: bigint | string | number;
    /**
     * The maximum number of royalty tokens that can be distributed to the external royalty policies (max: 100,000,000).
     * @default 100_000_000
     */
    maxRts?: number | string;
    /**
     * The maximum revenue share percentage allowed for minting the License Tokens. Must be between 0 and 100 (where 100% represents 100_000_000).
     * @default 100
     */
    maxRevenueShare?: number | string;
    licenseTemplate?: Address;
  };
  ```

  ```typescript Response Type
  export type MintAndRegisterIpAndMakeDerivativeResponse = {
    encodedTxData?: EncodedTxData;
  } & CommonRegistrationResponse;

  export type CommonRegistrationResponse = {
    txHash?: Hex;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
  };
  ```
</CodeGroup>

## batchMintAndRegisterIpAndMakeDerivative

ë¼ì´ì„ ìŠ¤ í† í° ì—†ì´ ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ì¼ê´„ ë¯¼íŒ…í•˜ê³  íŒŒìƒ IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                                       | íƒ€ì…                                                                                                                      |
| ----------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `batchMintAndRegisterIpAndMakeDerivative` | `(request: BatchMintAndRegisterIpAndMakeDerivativeRequest) => Promise<BatchMintAndRegisterIpAndMakeDerivativeResponse>` |

## mintAndRegisterIp

SPGNFT ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ë¯¼íŒ…í•˜ê³  ë©”íƒ€ë°ì´í„°ì™€ í•¨ê»˜ IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ì„ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                 | íƒ€ì…                                                                   |
| ------------------- | -------------------------------------------------------------------- |
| `mintAndRegisterIp` | `(request: MintAndRegisterIpRequest) => Promise<RegisterIpResponse>` |

Parameters:

* `request.spgNftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.allowDuplicates`: \[ì„ íƒì‚¬í•­] ë™ì¼í•œ NFT ë©”íƒ€ë°ì´í„°ë¡œ IP ë¯¼íŒ…ì„ í—ˆìš©í•˜ë ¤ë©´ trueë¡œ ì„¤ì •í•˜ì„¸ìš”.**Default: true**
* `request.recipient`: \[ì„ íƒì‚¬í•­] ë¯¼íŒ…ëœ NFTë¥¼ ë°›ì„ ìˆ˜ì‹ ìì˜ ì£¼ì†Œ, ê¸°ë³¸ê°’ì€ ì‚¬ìš©ìì˜ ì§€ê°‘ ì£¼ì†Œì…ë‹ˆë‹¤.
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë¯¼íŒ…ë  NFTì™€ ìƒˆë¡œ ë“±ë¡ë  IPì˜ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex, Address, zeroAddress } from "viem";

  const response = await client.ipAsset.mintAndRegisterIp({
    // an NFT contract address created by the SPG
    spgNftContract: "0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc",
    // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
    ipMetadata: {
      ipMetadataURI: "test-uri",
      ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
      nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
      nftMetadataURI: "test-nft-uri",
    },
    txOptions: { waitForTransaction: true },
  });

  console.log(
    `Completed at transaction hash ${response.txHash}, NFT Token ID: ${response.tokenId}, IPA ID: ${response.ipId}, License Terms ID: ${response.licenseTermsId}`
  );
  ```

  ```typescript Request Type
  export type MintAndRegisterIpRequest = {
    spgNftContract: Address;
    recipient?: Address;
    allowDuplicates: boolean;
  } & IpMetadataAndTxOptions &
    WithWipOptions;
  ```

  ```typescript Response Type
  export type RegisterIpResponse = {
    encodedTxData?: EncodedTxData;
  } & CommonRegistrationResponse;

  export type CommonRegistrationResponse = {
    txHash?: Hex;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
  };
  ```
</CodeGroup>

## registerPilTermsAndAttach

í”„ë¡œê·¸ë˜ë¨¸ë¸” IP ë¼ì´ì„ ìŠ¤ ì•½ê´€ì„ ë“±ë¡(ë¯¸ë“±ë¡ ìƒíƒœì¸ ê²½ìš°)í•˜ê³  IPì— ì—°ê²°í•©ë‹ˆë‹¤.

| ë©”ì„œë“œ                         | íƒ€ì…                                                                                          |
| --------------------------- | ------------------------------------------------------------------------------------------- |
| `registerPilTermsAndAttach` | `(request: RegisterPilTermsAndAttachRequest) => Promise<RegisterPilTermsAndAttachResponse>` |

Parameters:

* `request.ipId`: IPì˜ ID.
* `request.licenseTermsData[]`: ì—°ê²°í•  ë¼ì´ì„ ìŠ¤ ì•½ê´€ ë°°ì—´.
  * `request.licenseTermsData.terms`: ì°¸ì¡°: [LicenseTerms íƒ€ì…](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/resources/license.ts#L26).
  * `request.licenseTermsData.licensingConfig`: \[ì„ íƒì‚¬í•­] ì°¸ì¡°: [LicensingConfig íƒ€ì…](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/common.ts#L15). ì œê³µë˜ì§€ ì•Šì€ ê²½ìš°, [ì—¬ê¸°](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/utils/validateLicenseConfig.ts)ì— í‘œì‹œëœ ê¸°ë³¸ê°’ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
* `request.deadline`: \[ì„ íƒì‚¬í•­] ì„œëª…ì˜ ë§ˆê° ì‹œê°„(ë°€ë¦¬ì´ˆ). **ê¸°ë³¸ê°’ì€ 1000**ì…ë‹ˆë‹¤.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { LicenseTerms } from "@story-protocol/core-sdk";
  import { zeroAddress } from "viem";

  const commercialRemixTerms: LicenseTerms = {
    transferable: true,
    royaltyPolicy: "0xBe54FB168b3c982b7AaE60dB6CF75Bd8447b390E", // RoyaltyPolicyLAP address from https://docs.story.foundation/docs/deployed-smart-contracts
    defaultMintingFee: 0n,
    expiration: 0n,
    commercialUse: true,
    commercialAttribution: true,
    commercializerChecker: zeroAddress,
    commercializerCheckerData: zeroAddress,
    commercialRevShare: 50, // can claim 50% of derivative revenue
    commercialRevCeiling: 0n,
    derivativesAllowed: true,
    derivativesAttribution: true,
    derivativesApproval: false,
    derivativesReciprocal: true,
    derivativeRevCeiling: 0n,
    currency: "0x1514000000000000000000000000000000000000", // $WIP address from https://docs.story.foundation/docs/deployed-smart-contracts
    uri: "",
  };

  const response = await client.ipAsset.registerPilTermsAndAttach({
    ipId: "0x4c1f8c1035a8cE379dd4ed666758Fb29696CF721",
    licenseTermsData: [{ terms: commercialRemixTerms }],
    txOptions: { waitForTransaction: true },
  });
  console.log(`License Terms ${response.licenseTermsId} attached to IP Asset.`);
  ```

  ```typescript Request Type
  export type RegisterPilTermsAndAttachRequest = {
    ipId: Address;
    licenseTermsData: LicenseTermsData<
      RegisterPILTermsRequest,
      LicensingConfig
    >[];
    deadline?: string | number | bigint;
    txOptions?: TxOptions;
  };
  ```

  ```typescript Response Type
  export type RegisterPilTermsAndAttachResponse = {
    txHash?: Hex;
    encodedTxData?: EncodedTxData;
    licenseTermsIds?: bigint[];
  };
  ```
</CodeGroup>

## mintAndRegisterIpAndMakeDerivativeWithLicenseTokens

ì»¬ë ‰ì…˜ì—ì„œ NFTë¥¼ ë¯¼íŒ…í•˜ê³  ë¼ì´ì„ ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ì—¬ íŒŒìƒ IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤

<Note>
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ì„ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                                                   | íƒ€ì…                                                                                                     |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------ |
| `mintAndRegisterIpAndMakeDerivativeWithLicenseTokens` | `(request: MintAndRegisterIpAndMakeDerivativeWithLicenseTokensRequest) => Promise<RegisterIpResponse>` |

Parameters:

* `request.spgNftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.allowDuplicates`: \[ì„ íƒì‚¬í•­] ë™ì¼í•œ NFT ë©”íƒ€ë°ì´í„°ë¡œ IP ë¯¼íŒ…ì„ í—ˆìš©í•˜ë ¤ë©´ trueë¡œ ì„¤ì •í•˜ì„¸ìš”.**Default: true**
* `request.maxRts`: ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **ë‹¨ìˆœí™”ë¥¼ ìœ„í•œ ê¶Œì¥ê°’: 100\_000\_000**
* `request.licenseTokenIds`: IPë¥¼ ìƒìœ„ IPì— ì—°ê²°í•˜ê¸° ìœ„í•´ ì†Œê°ë  ë¼ì´ì„ ìŠ¤ í† í°ì˜ ID.
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë¯¼íŒ…ë  NFTì™€ ìƒˆë¡œ ë“±ë¡ë  IPì˜ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.recipient`: \[ì„ íƒì‚¬í•­] ë¯¼íŒ…ëœ NFTë¥¼ ë°›ì„ ì£¼ì†Œ, ê¸°ë³¸ê°’ì€ ì‚¬ìš©ìì˜ ì§€ê°‘ ì£¼ì†Œì…ë‹ˆë‹¤.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex } from "viem";

  const response =
    await client.ipAsset.mintAndRegisterIpAndMakeDerivativeWithLicenseTokens({
      spgNftContract: "0xc32A8a0FF3beDDDa58393d022aF433e78739FAbc", // your SPG NFT contract address
      licenseTokenIds: ["10"],
      // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
      ipMetadata: {
        ipMetadataURI: "test-uri",
        ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
        nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
        nftMetadataURI: "test-nft-uri",
      },
      maxRts: 100_000_000, // default
      txOptions: { waitForTransaction: true },
    });

  console.log(
    `Completed at transaction hash ${response.txHash}, IPA ID: ${response.ipId}, Token ID: ${response.tokenId}`
  );
  ```

  ```typescript Request Type
  export type MintAndRegisterIpAndMakeDerivativeWithLicenseTokensRequest = {
    spgNftContract: Address;
    licenseTokenIds: string[] | bigint[] | number[];
    recipient?: Address;
    maxRts: number | string;
    allowDuplicates: boolean;
  } & IpMetadataAndTxOptions &
    WithWipOptions;
  ```

  ```typescript Response Type
  export type RegisterIpResponse = {
    encodedTxData?: EncodedTxData;
  } & CommonRegistrationResponse;

  export type CommonRegistrationResponse = {
    txHash?: Hex;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
  };
  ```
</CodeGroup>

## registerIpAndMakeDerivativeWithLicenseTokens

ì£¼ì–´ì§„ NFTë¥¼ ë¼ì´ì„ ìŠ¤ í† í°ì„ ì‚¬ìš©í•˜ì—¬ íŒŒìƒ IPë¡œ ë“±ë¡í•©ë‹ˆë‹¤.

<Note>
  ì´ í•¨ìˆ˜ëŠ” ë˜í•œ ê¸°ë³¸ NFTì˜ `tokenUri`ì„ ë‹¤ìŒì— ì „ë‹¬ëœ ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤ `ipMetadata.nftMetadataURI`.
</Note>

| ë©”ì„œë“œ                                            | íƒ€ì…                                                                                              |
| ---------------------------------------------- | ----------------------------------------------------------------------------------------------- |
| `registerIpAndMakeDerivativeWithLicenseTokens` | `(request: RegisterIpAndMakeDerivativeWithLicenseTokensRequest) => Promise<RegisterIpResponse>` |

Parameters:

* `request.nftContract`: NFT ì»¬ë ‰ì…˜ì˜ ì£¼ì†Œ.
* `request.tokenId`: NFTì˜ ID.
* `request.maxRts`: ì™¸ë¶€ ë¡œì—´í‹° ì •ì±…ì— ë¶„ë°°ë  ìˆ˜ ìˆëŠ” ìµœëŒ€ ë¡œì—´í‹° í† í° ìˆ˜. 0ì—ì„œ 100,000,000 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤. **ë‹¨ìˆœí™”ë¥¼ ìœ„í•œ ê¶Œì¥ê°’: 100\_000\_000**
* `request.licenseTokenIds`: IPë¥¼ ìƒìœ„ IPì— ì—°ê²°í•˜ê¸° ìœ„í•´ ì†Œê°ë  ë¼ì´ì„ ìŠ¤ í† í°ì˜ ID.
* `request.ipMetadata`: \[ì„ íƒì‚¬í•­] ìƒˆë¡œ ë¯¼íŒ…ë  NFTì™€ ìƒˆë¡œ ë“±ë¡ë  IPì˜ ì›í•˜ëŠ” ë©”íƒ€ë°ì´í„°.
  * `request.ipMetadata.ipMetadataURI` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.ipMetadataHash` \[ì„ íƒì‚¬í•­] IPì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
  * `request.ipMetadata.nftMetadataURI` \[ì„ íƒì‚¬í•­] NFTì˜ ë©”íƒ€ë°ì´í„° URI.
  * `request.ipMetadata.nftMetadataHash` \[ì„ íƒì‚¬í•­] IP NFTì˜ ë©”íƒ€ë°ì´í„° í•´ì‹œ.
* `request.deadline`: \[ì„ íƒì‚¬í•­] ì„œëª…ì˜ ê¸°í•œ(ë°€ë¦¬ì´ˆ ë‹¨ìœ„). **ê¸°ë³¸ê°’ì€ 1000**.
* `request.txOptions`: \[ì„ íƒì‚¬í•­] íŠ¸ëœì­ì…˜ [ì˜µì…˜](https://github.com/storyprotocol/sdk/blob/main/packages/core-sdk/src/types/options.ts).

<CodeGroup>
  ```typescript TypeScript
  import { toHex } from "viem";

  const response =
    await client.ipAsset.registerIpAndMakeDerivativeWithLicenseTokens({
      nftContract: "0x041B4F29183317Fd352AE57e331154b73F8a1D73", // your NFT contract address
      tokenId: "127",
      licenseTokenIds: ["10"],
      // https://docs.story.foundation/docs/ip-asset#adding-nft--ip-metadata-to-ip-asset
      ipMetadata: {
        ipMetadataURI: "test-uri",
        ipMetadataHash: toHex("test-metadata-hash", { size: 32 }),
        nftMetadataHash: toHex("test-nft-metadata-hash", { size: 32 }),
        nftMetadataURI: "test-nft-uri",
      },
      txOptions: { waitForTransaction: true },
    });

  console.log(
    `Completed at transaction hash ${response.txHash}, IPA ID: ${response.ipId}`
  );
  ```

  ```typescript Request Type
  export type RegisterIpAndMakeDerivativeWithLicenseTokensRequest = {
    nftContract: Address;
    tokenId: string | number | bigint;
    licenseTokenIds: string[] | bigint[] | number[];
    deadline?: string | number | bigint;
    maxRts: number | string;
  } & IpMetadataAndTxOptions &
    WithWipOptions;
  ```

  ```typescript Response Type
  export type RegisterIpResponse = {
    encodedTxData?: EncodedTxData;
  } & CommonRegistrationResponse;

  export type CommonRegistrationResponse = {
    txHash?: Hex;
    ipId?: Address;
    tokenId?: bigint;
    receipt?: TransactionReceipt;
  };
  ```
</CodeGroup>
